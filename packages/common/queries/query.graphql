subscription Home {
  assets(where: { metadata: { _is_null: false } }) {
    ...Assets
  }
}

fragment Assets on assets {
  chainId
  contractAddress
  tokenId
  holder
  metadata
  orders(where: { isValid: { _eq: true }, direction: { _eq: "sell" } }, order_by: { sortablePrice: desc }) {
    price
  }
}

subscription Asset($chainId: String, $contractAddress: String, $tokenId: String) {
  assets(
    where: { chainId: { _eq: $chainId }, contractAddress: { _eq: $contractAddress }, tokenId: { _eq: $tokenId } }
  ) {
    ...Asset
  }
}

fragment Asset on assets {
  chainId
  contractAddress
  tokenId
  holder
  metadata
  orders(where: { isValid: { _eq: true }, direction: { _eq: "sell" } }, order_by: { sortablePrice: desc }) {
    id
    direction
    protocol
    offerer
    price
    signedOrder
  }
}
